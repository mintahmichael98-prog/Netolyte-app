import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import React, { useState, useEffect } from 'react';
import { Calendar, Link as LinkIcon, Save, Zap, Loader2 } from 'lucide-react';
import toast from 'react-hot-toast';
const DAYS = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
export default function BookingCalendar({ settings, onSave }) {
    const [localSettings, setLocalSettings] = useState(settings);
    const [isConnecting, setIsConnecting] = useState(false);
    useEffect(() => {
        setLocalSettings(settings);
    }, [settings]);
    const handleConnect = () => {
        setIsConnecting(true);
        setTimeout(() => {
            setLocalSettings(prev => ({ ...prev, isConnected: true }));
            setIsConnecting(false);
            toast.success("Calendar connected successfully!");
        }, 1500);
    };
    const handleSave = () => {
        onSave(localSettings);
        toast.success("Booking settings saved!");
    };
    const handleAvailabilityChange = (day, field, value) => {
        setLocalSettings(prev => ({
            ...prev,
            availability: {
                ...prev.availability,
                [day]: {
                    ...prev.availability[day],
                    [field]: value,
                },
            },
        }));
    };
    if (!localSettings.isConnected) {
        return (_jsx("div", { className: "h-full flex items-center justify-center p-8 bg-slate-50 dark:bg-[#020617] text-center", children: _jsxs("div", { className: "max-w-md", children: [_jsx("div", { className: "w-24 h-24 bg-white dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6 border border-slate-200 dark:border-slate-700 shadow-xl", children: _jsx(Calendar, { className: "w-12 h-12 text-indigo-500" }) }), _jsx("h2", { className: "text-3xl font-bold text-slate-900 dark:text-white mb-3", children: "Connect Your Calendar" }), _jsx("p", { className: "text-lg text-slate-500 dark:text-slate-400 mb-8", children: "Integrate your Google or Outlook calendar to allow leads to book meetings directly. This enables your personal booking link for use in email campaigns." }), _jsxs("button", { onClick: handleConnect, disabled: isConnecting, className: "px-8 py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-lg shadow-lg shadow-indigo-500/20 flex items-center justify-center gap-2 mx-auto", children: [isConnecting ? _jsx(Loader2, { className: "w-6 h-6 animate-spin" }) : _jsx(Zap, { className: "w-6 h-6" }), isConnecting ? 'Connecting...' : 'Connect Calendar'] })] }) }));
    }
    return (_jsx("div", { className: "h-full overflow-y-auto p-8 bg-slate-50 dark:bg-[#020617]", children: _jsxs("div", { className: "max-w-4xl mx-auto space-y-10", children: [_jsxs("div", { className: "flex justify-between items-center", children: [_jsxs("div", { children: [_jsxs("h2", { className: "text-3xl font-bold text-slate-900 dark:text-white flex items-center gap-3", children: [_jsx(Calendar, { className: "w-8 h-8 text-indigo-500" }), " Booking Page Settings"] }), _jsx("p", { className: "text-slate-500 dark:text-slate-400 mt-2", children: "Manage your personal booking link and availability." })] }), _jsxs("button", { onClick: handleSave, className: "px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg shadow-md flex items-center gap-2", children: [_jsx(Save, { className: "w-4 h-4" }), " Save Settings"] })] }), _jsxs("div", { className: "bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm", children: [_jsx("h3", { className: "font-bold text-lg text-slate-900 dark:text-white mb-6", children: "Event Details" }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [_jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2", children: "Booking URL" }), _jsxs("div", { className: "flex items-center", children: [_jsx("span", { className: "px-3 py-2 bg-slate-100 dark:bg-slate-900 border border-r-0 border-slate-200 dark:border-slate-700 rounded-l-lg text-slate-500 text-sm", children: "netolyte.ai/book/" }), _jsx("input", { type: "text", value: localSettings.urlSlug, onChange: (e) => setLocalSettings(prev => ({ ...prev, urlSlug: e.target.value.replace(/\s+/g, '-').toLowerCase() })), placeholder: "your-name", className: "w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-r-lg outline-none focus:ring-2 focus:ring-indigo-500 text-sm" })] })] }), _jsxs("div", { className: "grid grid-cols-2 gap-4", children: [_jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2", children: "Meeting Title" }), _jsx("input", { type: "text", value: localSettings.meetingTitle, onChange: (e) => setLocalSettings(prev => ({ ...prev, meetingTitle: e.target.value })), className: "w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg outline-none focus:ring-2 focus:ring-indigo-500 text-sm" })] }), _jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2", children: "Duration" }), _jsxs("select", { value: localSettings.meetingDuration, onChange: (e) => setLocalSettings(prev => ({ ...prev, meetingDuration: parseInt(e.target.value) })), className: "w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg outline-none focus:ring-2 focus:ring-indigo-500 text-sm", children: [_jsx("option", { value: 15, children: "15 minutes" }), _jsx("option", { value: 30, children: "30 minutes" }), _jsx("option", { value: 60, children: "60 minutes" })] })] })] })] }), _jsxs("div", { className: "mt-6 bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-lg flex items-center gap-3 border border-indigo-100 dark:border-indigo-800", children: [_jsx(LinkIcon, { className: "w-5 h-5 text-indigo-600 dark:text-indigo-400" }), _jsxs("span", { className: "text-sm text-indigo-800 dark:text-indigo-200 font-medium", children: ["Your live booking link: ", _jsxs("a", { href: "#", className: "font-bold underline", children: ["https://netolyte.ai/book/", localSettings.urlSlug || '...'] })] })] })] }), _jsxs("div", { className: "bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm", children: [_jsx("h3", { className: "font-bold text-lg text-slate-900 dark:text-white mb-6", children: "Weekly Availability" }), _jsx("div", { className: "space-y-4", children: DAYS.map(day => (_jsxs("div", { className: "grid grid-cols-5 items-center gap-4 p-3 rounded-lg bg-slate-50 dark:bg-slate-900/50", children: [_jsxs("div", { className: "col-span-1 flex items-center", children: [_jsx("input", { type: "checkbox", checked: localSettings.availability[day].enabled, onChange: (e) => handleAvailabilityChange(day, 'enabled', e.target.checked), className: "w-4 h-4 rounded text-indigo-600 border-slate-300 focus:ring-indigo-500" }), _jsx("label", { className: "ml-3 text-sm font-medium text-slate-800 dark:text-slate-200 capitalize", children: day })] }), localSettings.availability[day].enabled ? (_jsxs(_Fragment, { children: [_jsxs("div", { className: "col-span-2 flex items-center gap-2", children: [_jsx("input", { type: "time", value: localSettings.availability[day].startTime, onChange: (e) => handleAvailabilityChange(day, 'startTime', e.target.value), className: "w-full px-2 py-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md text-sm outline-none focus:ring-2 focus:ring-indigo-500" }), _jsx("span", { children: "-" }), _jsx("input", { type: "time", value: localSettings.availability[day].endTime, onChange: (e) => handleAvailabilityChange(day, 'endTime', e.target.value), className: "w-full px-2 py-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md text-sm outline-none focus:ring-2 focus:ring-indigo-500" })] }), _jsx("div", { className: "col-span-2" })] })) : (_jsx("div", { className: "col-span-4 text-sm text-slate-400", children: "Unavailable" }))] }, day))) })] })] }) }));
}
